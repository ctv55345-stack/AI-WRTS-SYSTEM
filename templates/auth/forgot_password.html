{% extends "base/base.html" %}

{% block title %}Quên mật khẩu - AI-WRTS System{% endblock %}

{% block extra_css %}
<link href="{{ url_for('static', filename='css/auth.css') }}" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-card">
        <div class="auth-card-header">
            <div class="auth-logo">
                <i class="fas fa-question-circle"></i>
            </div>
            <h1 class="auth-title">Quên mật khẩu?</h1>
            <p class="auth-subtitle">Đừng lo! Chúng tôi sẽ giúp bạn lấy lại mật khẩu</p>
        </div>
        
        <div class="auth-card-body">
            {% if success %}
                <div class="auth-success-message">
                    <i class="fas fa-check-circle"></i>
                    <h4>Email đã được gửi!</h4>
                    <p>Vui lòng kiểm tra hộp thư của bạn và làm theo hướng dẫn để đặt lại mật khẩu.</p>
                </div>
                
                <div class="auth-links">
                    <p>
                        <a href="{{ url_for('auth.login') }}" class="auth-link">
                            <i class="fas fa-arrow-left"></i>
                            Quay lại đăng nhập
                        </a>
                    </p>
                </div>
            {% else %}
                <div class="forgot-password-icon">
                    <i class="fas fa-envelope"></i>
                </div>
                
                <p class="forgot-password-text">
                    Nhập địa chỉ email đã đăng ký của bạn. Chúng tôi sẽ gửi một liên kết để bạn có thể đặt lại mật khẩu.
                </p>
                
                <form method="POST" class="auth-form" novalidate>
                    {{ form.hidden_tag() }}
                    
                    <div class="form-group">
                        <label for="email" class="form-label">
                            <i class="fas fa-envelope"></i>
                            {{ form.email.label.text }}
                        </label>
                        {{ form.email(
                            class="form-control" + (" is-invalid" if form.email.errors else ""),
                            placeholder="email@example.com",
                            type="email",
                            autofocus=true
                        ) }}
                        {% if form.email.errors %}
                            <div class="invalid-feedback">
                                {% for error in form.email.errors %}
                                    {{ error }}
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    
                    <button type="submit" class="auth-submit-btn">
                        <i class="fas fa-paper-plane btn-text"></i>
                        <span class="btn-text">Gửi email khôi phục</span>
                        <i class="fas fa-spinner spinner"></i>
                    </button>
                    
                    <div class="auth-links">
                        <p>
                            <a href="{{ url_for('auth.login') }}" class="auth-link">
                                <i class="fas fa-arrow-left"></i>
                                Quay lại đăng nhập
                            </a>
                        </p>
                        
                        <div class="auth-divider">hoặc</div>
                        
                        <p>
                            Chưa có tài khoản? 
                            <a href="{{ url_for('auth.register') }}" class="auth-link">
                                <i class="fas fa-user-plus"></i>
                                Đăng ký ngay
                            </a>
                        </p>
                    </div>
                </form>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/auth.js') }}"></script>
{% endblock %}