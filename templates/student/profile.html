<!DOCTYPE html>
<html>
<head>
    <title>Thông tin cá nhân</title>
</head>
<body>
    <div>
        <h1>THÔNG TIN CÁ NHÂN</h1>
        
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div>
                        <strong>[{{ category|upper }}]</strong> {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        
        <h2>THỐNG KÊ HỌC TẬP</h2>
        <div>
            <div>
                <h2>{{ total_classes }}</h2>
                <p>Tổng số lớp</p>
            </div>
            <div>
                <h2>{{ active_classes }}</h2>
                <p>Đang học</p>
            </div>
            <div>
                <h2>{{ completed_classes }}</h2>
                <p>Đã hoàn thành</p>
            </div>
        </div>
        
        <h2>THÔNG TIN TÀI KHOẢN</h2>
        <div>
            <table>
                <tr><td>Tên đăng nhập</td><td><strong>{{ user.username }}</strong></td></tr>
                <tr><td>Họ và tên</td><td><strong>{{ user.full_name }}</strong></td></tr>
                <tr><td>Email</td><td>{{ user.email }}</td></tr>
                <tr><td>Số điện thoại</td><td>{{ user.phone or 'Chưa cập nhật' }}</td></tr>
                <tr><td>Ngày sinh</td><td>{{ user.date_of_birth.strftime('%d/%m/%Y') if user.date_of_birth else 'Chưa cập nhật' }}</td></tr>
                <tr><td>Giới tính</td><td>{% if user.gender == 'male' %}Nam{% elif user.gender == 'female' %}Nữ{% elif user.gender == 'other' %}Khác{% else %}Chưa cập nhật{% endif %}</td></tr>
                <tr><td>Địa chỉ</td><td>{{ user.address or 'Chưa cập nhật' }}</td></tr>
                <tr><td>Vai trò</td><td><strong>{{ user.role.role_name }}</strong></td></tr>
                <tr><td>Ngày tham gia</td><td>{{ user.created_at.strftime('%d/%m/%Y %H:%M') }}</td></tr>
                <tr><td>Đăng nhập lần cuối</td><td>{{ user.last_login_at.strftime('%d/%m/%Y %H:%M') if user.last_login_at else 'Chưa có dữ liệu' }}</td></tr>
            </table>
        </div>
        
        <p>
            <a href="{{ url_for('auth.edit_profile') }}">Chỉnh sửa thông tin</a>
            <a href="{{ url_for('auth.change_password') }}">Đổi mật khẩu</a>
        </p>
        
        <hr>
        <p>
            <a href="{{ url_for('student.dashboard') }}">← Về Dashboard</a>
        </p>
    </div>
</body>
</html>

