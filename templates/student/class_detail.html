<!DOCTYPE html>
<html>
<head>
    <title>Chi ti·∫øt l·ªõp h·ªçc</title>
</head>
<body>
    <h1>CHI TI·∫æT L·ªöP H·ªåC</h1>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div>
                    <strong>[{{ category|upper }}]</strong> {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    
    <h2>TH√îNG TIN L·ªöP</h2>
    <table>
        <tr>
            <td>M√£ l·ªõp</td>
            <td><strong>{{ class_obj.class_code }}</strong></td>
        </tr>
        <tr>
            <td>T√™n l·ªõp</td>
            <td><strong>{{ class_obj.class_name }}</strong></td>
        </tr>
        <tr>
            <td>M√¥ t·∫£</td>
            <td>{{ class_obj.description or 'Kh√¥ng c√≥ m√¥ t·∫£' }}</td>
        </tr>
        <tr>
            <td>Gi·∫£ng vi√™n</td>
            <td>
                {{ class_obj.instructor.full_name }}<br>
                <small>Email: {{ class_obj.instructor.email }}</small><br>
                <small>SƒêT: {{ class_obj.instructor.phone or 'Ch∆∞a c·∫≠p nh·∫≠t' }}</small>
            </td>
        </tr>
        <tr>
            <td>C·∫•p ƒë·ªô</td>
            <td>
                {% if class_obj.level == 'beginner' %}S∆° c·∫•p
                {% elif class_obj.level == 'intermediate' %}Trung c·∫•p
                {% elif class_obj.level == 'advanced' %}N√¢ng cao
                {% endif %}
            </td>
        </tr>
        <tr>
            <td>S·ªë h·ªçc vi√™n</td>
            <td>{{ class_obj.current_students }}/{{ class_obj.max_students }} h·ªçc vi√™n</td>
        </tr>
        <tr>
            <td>Th·ªùi gian</td>
            <td>
                <strong>B·∫Øt ƒë·∫ßu:</strong> {{ class_obj.start_date.strftime('%d/%m/%Y') }}<br>
                <strong>K·∫øt th√∫c:</strong> {{ class_obj.end_date.strftime('%d/%m/%Y') if class_obj.end_date else 'Ch∆∞a x√°c ƒë·ªãnh' }}
            </td>
        </tr>
        <tr>
            <td>Tr·∫°ng th√°i ƒëƒÉng k√Ω</td>
            <td>
                <strong>
                {% if enrollment.enrollment_status == 'active' %}ƒêang h·ªçc
                {% elif enrollment.enrollment_status == 'completed' %}ƒê√£ ho√†n th√†nh
                {% elif enrollment.enrollment_status == 'suspended' %}T·∫°m d·ª´ng
                {% elif enrollment.enrollment_status == 'dropped' %}ƒê√£ r·ªùi
                {% endif %}
                </strong><br>
                <small>Ng√†y ƒëƒÉng k√Ω: {{ enrollment.enrolled_at.strftime('%d/%m/%Y %H:%M') }}</small>
                {% if enrollment.completed_at %}
                <br><small>Ng√†y ho√†n th√†nh: {{ enrollment.completed_at.strftime('%d/%m/%Y %H:%M') }}</small>
                {% endif %}
            </td>
        </tr>
        {% if enrollment.notes %}
        <tr>
            <td>Ghi ch√∫</td>
            <td>{{ enrollment.notes }}</td>
        </tr>
        {% endif %}
    </table>
    
    <hr>
    
    <h2>L·ªäCH H·ªåC ({{ schedules|length }})</h2>
    {% if schedules %}
        <div>
            {% for s in schedules %}
            <div>
                <h4>{{ s.day_display }}</h4>
                <p>
                    <strong>{{ s.time_start.strftime('%H:%M') }} - {{ s.time_end.strftime('%H:%M') }}</strong><br>
                    {% if s.location %}
                    {{ s.location }}<br>
                    {% endif %}
                    {% if s.notes %}
                    {{ s.notes }}
                    {% endif %}
                </p>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p>Ch∆∞a c√≥ l·ªãch h·ªçc c·ª• th·ªÉ</p>
    {% endif %}
    
    <hr>
    
    <h2>H·ªåC VI√äN C√ôNG L·ªöP ({{ classmates|length }})</h2>
    {% if classmates %}
        {% for cm in classmates %}
        <div>
            <strong>{{ cm.student.full_name }}</strong>
            {% if cm.student.phone %}-{% endif %}
            <br>
            <small>ƒêƒÉng k√Ω: {{ cm.enrolled_at.strftime('%d/%m/%Y') }}</small>
        </div>
        {% endfor %}
    {% else %}
        <p>Kh√¥ng c√≥ h·ªçc vi√™n kh√°c trong l·ªõp</p>
    {% endif %}
    
    <hr>
    <p>
        <a href="{{ url_for('student.classes') }}">‚Üê V·ªÅ danh s√°ch l·ªõp h·ªçc</a> |
        <a href="{{ url_for('student.dashboard') }}">üè† Dashboard</a>
    </p>
</body>
</html>

